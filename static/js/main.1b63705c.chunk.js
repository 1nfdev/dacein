(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(3),r=n(134),s=n.n(r),i=n(0),o=n.n(i),c=n(144),l=n(137),u=(n(285),n(286),n(287),n(48)),_=n(7),d=function(e){var t=new RegExp(/hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}%)\s*,\s*(\d{1,3}%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)/g),n=new RegExp(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/g),a=new RegExp(/#[a-fA-F0-9]{3,6}/g);return e.match(t)?"hsl":e.match(n)?"rgb":e.match(a)?"hex":null},p=function(e){var t=e.value,n=e.coords,r=e.onChange,s=Object(i.useState)(t),c=Object(a.a)(s,2),l=c[0],d=c[1],p=Math.round(Math.log10(Math.abs(t))),m=Math.pow(10,p+1);return o.a.createElement("div",{className:"absolute",style:{top:n.top>30?n.top-12:n.top+16,left:n.left-10,zIndex:10,width:120}},o.a.createElement(u.a,{position:Object(_.d)(l,0,m,0,1),onChange:function(e){var t=Object(_.d)(e,0,1,0,m);d(t),r("".concat(t))}}))},m=function(e){var t=e.value,n=e.coords,r=e.onChange,s=Object(i.useState)(t.replace(/"/g,"")),l=Object(a.a)(s,2),u=l[0],_=l[1],p=d(t);return o.a.createElement("div",{className:"absolute bg-light-gray br3",style:{top:n.top>300?n.top-250:n.top+20,left:n.left-40,zIndex:10}},o.a.createElement(c.a,{color:u,onChange:function(e){_(e[p]),r(function(e,t){return"hex"===t?'"'.concat(e.hex,'"'):"hsl"===t?'"hsl('.concat(e.hsl.h,", ").concat(e.hsl.s,", ").concat(e.hsl.l,", ").concat(e.hsl.a,')"'):"rgb"===t?'"rgb('.concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,')"'):null}(e,p))}}))},f=function(e){var t=e.type,n=e.coords,a=e.value,r=e.onChange;return"number"===t?o.a.createElement(p,{value:a,coords:n,onChange:r}):null!==d(a)?o.a.createElement(m,{value:a,coords:n,onChange:r}):null},h=function(e){var t=e.code,n=e.highlight,r=e.onChange,c=Object(i.useState)(null),u=Object(a.a)(c,2),_=u[0],d=u[1],p=Object(i.useState)(null),m=Object(a.a)(p,2),h=m[0],v=m[1],E=Object(i.useRef)(null),g=Object(i.useRef)(null),b=Object(i.useRef)(null);return Object(i.useEffect)(function(){t!==h&&v(t)},[t]),Object(i.useEffect)(function(){if(E.current){var e=function(){b.current&&(b.current.clear(),b.current=null)};return e(),n&&(b.current=E.current.markText({line:n.start},{line:n.end},{className:"inspector-highlight"})),e}},[E,n]),o.a.createElement("div",{className:"relative h-100 overflow-scroll"},o.a.createElement(l.Controlled,{editorDidMount:function(e){return E.current=e},value:h,onBeforeChange:function(e,t,n){return v(n)},onChange:function(e,t,n){return r(n)},onCursor:function(e){var t=e.getCursor(),n=e.getTokenAt(t),a=e.charCoords({line:t.line,ch:n.start},"local");n.type&&(g.current=n.string.length,d({key:"".concat(n.type,"-").concat(n.string),type:n.type,value:"number"===n.type?Number(n.string):n.string,coords:a,text:{line:t.line,start:n.start}}))},options:{theme:"base16-grayscale-dark"}}),_&&o.a.createElement(s.a,{onOutsideClick:function(){return d(null)}},o.a.createElement(f,{key:_.key,type:_.type,coords:_.coords,value:_.value,onChange:function(e){var t=_.text,n=t.start,a=t.line,r=h.split("\n").map(function(t,r){return r!==a?t:t.substr(0,n)+e+t.substr(n+g.current)}).join("\n");g.current="".concat(e).length,v(r)}})))}},138:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n.n(a),s=n(4),i=function(e){var t=e.errors;return r.a.createElement("div",{className:"pa2 f7"},!t||!t.length&&r.a.createElement("div",{className:"gray"},"no errors"),(t||[]).filter(s.identity).map(function(e){return r.a.createElement("div",{className:"red",key:e},e)}))}},146:function(e,t,n){"use strict";var a=n(26),r=n(3),s=n(139),i=n.n(s),o=n(0),c=n.n(o),l=n(4),u=n(23),_=n(45),d=n(140),p=n(51),m=n(24),f=n(46),h=n(22),v=n(50),E=n(17),g=n(76),b=n.n(g),O=function(e){var t=e.toString(16).substr(0,6);return"#".concat(b()(t,6,"0"))},y=function(e){var t=e.sketch,n=e.globals,a=document.createElement("canvas");a.width=n.width,a.height=n.height;var s,i=a.getContext("2d");return{draw:function(e,a){var o=0;s=t.draw(e,a);var c=!0,l=!1,u=void 0;try{for(var _,d=s[Symbol.iterator]();!(c=(_=d.next()).done);c=!0){var p=_.value,m=Object(r.a)(p,2),f=m[0],h=m[1],v=Object.assign(h,{fill:h.fill?O(o):void 0,stroke:h.stroke?O(o):void 0});E.a[f]&&E.a[f](i,v,n),o++}}catch(g){l=!0,u=g}finally{try{c||null==d.return||d.return()}finally{if(l)throw u}}},onHover:function(e,t){var n=i.getImageData(e,t,1,1).data.slice(0,3);return function(e){return parseInt("0x".concat(e))}(Array.from(n).map(function(e){return b()(e.toString(16),2,"0")}).join(""))},getMetaForId:function(e){return Object(l.get)(s,e)}}},w=1e3,M=function(e){function t(){var e,n;Object(_.a)(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).setupCanvas=function(e){n.ref.width=(e||n.props).width,n.ref.height=(e||n.props).height,n.events=[];var t=function(e){return function(t){var a=n.ref.getBoundingClientRect();n.events.push({source:e,pos:[t.clientX-a.left,t.clientY-a.top]})}};n.onMouseMove=t("mousemove"),n.onMouseDown=t("mousedown"),n.onMouseUp=t("mouseup"),n.onMouseClick=t("mouseclick"),n.onKeyDown=function(e){n.events.push({source:"keydown",key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey})},n.onKeyUp=function(e){n.events.push({source:"keydown",key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey})},n.ref.addEventListener("mousemove",n.onMouseMove),n.ref.addEventListener("mousedown",n.onMouseDown),n.ref.addEventListener("mouseup",n.onMouseUp),n.ref.addEventListener("click",n.onMouseClick),n.ref.addEventListener("keydown",n.onKeyDown),n.ref.addEventListener("keyup",n.onKeyUp)},n.removeCanvasEvents=function(){n.ref.removeEventListener("mousemove",n.onMouseMove),n.ref.removeEventListener("mousedown",n.onMouseDown),n.ref.removeEventListener("mouseup",n.onMouseUp),n.ref.removeEventListener("click",n.onMouseClick),n.ref.removeEventListener("keydown",n.onKeyDown),n.ref.removeEventListener("keyup",n.onKeyUp)},n.resetCanvas=function(){n.removeCanvasEvents(),n.setupCanvas()},n.resetState=function(e){n.currentState=Object(l.cloneDeep)((e||n.props).sketch.initialState),n.props.setHistory(function(e){e.stateHistory=[n.currentState],e.eventsHistory=[[]],e.idx=0})},n.setupInspector=function(e){n.props.isPlaying||(n.inspector=y(e||n.props),n.onMouseDownInspector=function(e){n.props.isPlaying&&console.warning("onMouseDownInspector while playing!");var t=n.ref.getBoundingClientRect(),a=[Math.floor(e.clientX-t.left),Math.floor(e.clientY-t.top)],s=a[0],i=a[1],o=n.inspector.onHover(s,i),c=n.inspector.getMetaForId(o),l=Object(r.a)(c,2),u=l[0],_=l[1],d={id:o,command:u,args:_,delta:_.pos?[s-_.pos[0],i-_.pos[1]]:[0,0],target:[s,i]};n.props.setOptimiser(d)},n.onMouseUpInspector=function(){n.props.isPlaying&&console.warning("onMouseUpInspector while playing!"),n.props.setOptimiser(!1)},n.onMouseMoveInspector=function(e){n.props.isPlaying&&console.warning("onMouseMoveInspector while playing!");var t=n.ref.getBoundingClientRect(),r=[Math.floor(e.clientX-t.left),Math.floor(e.clientY-t.top)],s=r[0],i=r[1];if(n.props.optimiser)n.props.setOptimiser(Object(a.a)({},n.props.optimiser,{target:[s,i]}));else{var o=n.inspector.onHover(s,i),c=n.inspector.getMetaForId(o);if(!c||c.length<=1)return;var l=c[1].__meta;n.props.setHighlight(l?{start:l.lineStart-2,end:l.lineEnd-1}:null)}},n.onMouseOutInspector=function(){return n.props.setHighlight(null)},n.ref.addEventListener("mousemove",n.onMouseMoveInspector),n.ref.addEventListener("mousedown",n.onMouseDownInspector),n.ref.addEventListener("mouseout",n.onMouseOutInspector),window.addEventListener("mouseup",n.onMouseUpInspector))},n.removeInspector=function(){n.ref.removeEventListener("mousemove",n.onMouseMoveInspector),n.ref.removeEventListener("mousedown",n.onMouseDownInspector),n.ref.removeEventListener("mouseout",n.onMouseOutInspector),window.removeEventListener("mouseup",n.onMouseUpInspector),n.inspector=void 0},n.resetInspector=function(){n.removeInspector(),n.setupInspector()},n.runExecute=function(){0!==n.toExecute.size&&n.toExecute.size>0&&(n.toExecute.forEach(function(e){return n[e]()}),n.toExecute=new Set)},n.tick=function(){if(n.toExecute.size>0)n.frame=requestAnimationFrame(n.tick.bind(Object(h.a)(Object(h.a)(n))));else{var e=n.props,t=e.sketch,a=e.constants,s=e.globals,i=e.setHistory,o=e.isPlaying,c=n.ref.getContext("2d");o&&(n.currentState=Object(v.a)(n.currentState,function(e){return t.update(e,n.events)}),i(function(e){for(e.stateHistory.push(n.currentState),e.eventsHistory.push(n.events);e.stateHistory.length>w+1;)e.stateHistory.shift(),e.eventsHistory.shift();e.idx=Math.min(w,e.idx+1)})),n.inspector&&n.inspector.draw(n.currentState,a);var l=!0,u=!1,_=void 0;try{for(var d,p=t.draw(n.currentState,a)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value,f=Object(r.a)(m,2),g=f[0],b=f[1];E.a[g]&&E.a[g](c,b,s)}}catch(O){u=!0,_=O}finally{try{l||null==p.return||p.return()}finally{if(u)throw _}}n.events=[],n.frame=requestAnimationFrame(n.tick.bind(Object(h.a)(Object(h.a)(n))))}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.toExecute=new Set,this.runExecute=Object(l.debounce)(this.runExecute,16),this.setupCanvas(this.props),this.resetState(this.props),this.frame=requestAnimationFrame(this.tick)}},{key:"componentWillUmount",value:function(){this.frame&&cancelAnimationFrame(this.frame),this.removeCanvasEvents(),this.removeInspector()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){Object(l.xor)(Object.keys(e.sketch.initialState),Object.keys(this.currentState)).length>0&&(this.toExecute.add("resetState"),this.toExecute.add("resetInspector")),e.width===this.props.width&&e.height===this.props.height||(this.toExecute.add("resetCanvas"),this.toExecute.add("resetInspector")),e.historyIdx===this.props.historyIdx||e.isPlaying||(this.currentState=e.stateHistory[e.historyIdx],this.currentEvents=e.eventsHistory[e.historyIdx]),e.isPlaying&&!this.props.isPlaying&&this.toExecute.add("removeInspector"),!e.isPlaying&&this.props.isPlaying&&this.toExecute.add("resetInspector"),this.runExecute()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this;return c.a.createElement("canvas",{ref:function(t){return e.ref=t}})}}]),t}(c.a.Component),P=n(48),k=n(7),D=n(141);n.d(t,"a",function(){return I});var C=function(e){var t=e.onClick,n=e.children;return c.a.createElement("div",{className:"dib"},c.a.createElement("button",{className:"mr2 custom-dark bg-gray br-pill bn lh-solid dt dim pointer",style:{height:26,width:26},onClick:t},c.a.createElement("div",{className:"dtc v-mid tc",style:{fontSize:12,width:26}},n)))},j=function(e){var t=e.isPlaying,n=e.historyIdx,a=e.stateHistory,r=e.setIsPlaying,s=e.setHistory,i=e.onReset;return c.a.createElement("div",{className:"pa2 flex items-center"},c.a.createElement(C,{onClick:function(){t||s(function(e){e.stateHistory=e.stateHistory.slice(0,e.idx+1)}),r(!t)}},t?"\u275a\u275a":"\u25b6\ufe0e"),c.a.createElement(C,{onClick:i},c.a.createElement("span",{style:{fontSize:14}},"\u25fc")),c.a.createElement("div",{className:"ml2 w-100"},c.a.createElement(P.a,{disabled:t,position:a.length>1?Math.max(0,n/(a.length-1)):0,onChange:function(e){return s(function(t){t.idx=Object(k.b)(Math.floor(e*a.length),0,a.length-1)})}})))},I=function(e){var t=e.sketch,n=e.constants,s=e.code,_=e.setConstants,d=e.setHighlight,p=Object(o.useState)(!0),m=Object(r.a)(p,2),f=m[0],h=m[1],E=Object(o.useState)(!1),g=Object(r.a)(E,2),b=g[0],O=g[1],y=function(e){var t=Object(o.useState)(e),n=Object(r.a)(t,2),a=n[0],s=n[1];return[a,function(e){return s(Object(v.a)(e))}]}({stateHistory:[t.initialState||{}],eventsHistory:[[]],idx:0}),w=Object(r.a)(y,2),P=w[0],C=P.stateHistory,I=P.eventsHistory,S=P.idx,L=w[1],A=Object(l.get)(t,"size",[800,600]),R=Object(r.a)(A,2),x=R[0],T=R[1],K={width:x,height:T};return Object(o.useEffect)(function(){if(b){var e=C[S],r=function(e){var t,n=e.constants,a=e.sketch,r=e.state,s=e.id,i=e.target,o=e.delta,c=n;try{t=Object(D.uncmin)(function(e){var t=a.draw(r,e),n=Object(l.get)(t,[s,1,"pos"]);return void 0!==n?Object(k.c)(Object(k.a)(n,o),i):0},c,.01,void 0,100)}catch(u){console.warn(u)}if(t&&t.solution)return t.solution}(Object(a.a)({},b,{sketch:t,state:e,globals:K,constants:n}));r&&_(r)}},[b]),c.a.createElement("div",{className:"w-100 h-100"},c.a.createElement(u.b,{direction:u.a.VERTICAL,defaultDivide:.85},c.a.createElement("div",{className:"flex flex-column h-100"},c.a.createElement("div",{className:"mb2"},c.a.createElement(j,{setHistory:L,historyIdx:S,isPlaying:f,setIsPlaying:h,stateHistory:C,onReset:function(){L(function(e){e.stateHistory=[t.initialState||{}],e.eventsHistory=[[]],e.idx=0}),h(!1)}})),c.a.createElement("div",{className:"flex justify-center items-center relative h-100 overflow-hidden"},c.a.createElement(M,{width:x,height:T,sketch:t,code:s,isPlaying:f,historyIdx:S,stateHistory:C,eventsHistory:I,constants:n,globals:K,optimiser:b,setHistory:L,setOptimiser:O,setHighlight:d}))),c.a.createElement("div",{className:"pa2 overflow-scroll h-100"},c.a.createElement(i.a,{src:C[S],name:"state",enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,indentWidth:2,collapsed:1,theme:"grayscale"}))))}},148:function(e,t,n){"use strict";var a=n(3),r=n(0),s=n.n(r),i=n(142),o=n(143),c=n.n(o),l=function(e){var t=e.width,n=e.height,a=e.children,r=e.onClose,i=c()(),o=i.innerWidth,l=i.innerHeight;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"absolute absolute--fill",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:10},onClick:function(){r&&r()}}),s.a.createElement("div",{className:"overlfow-scroll absolute bg-custom-dark ba bg-gray",style:{top:(l-n)/2,left:(o-t)/2,width:t,height:n,zIndex:20}},a))},u=function(e){var t=e.href,n=e.children;return s.a.createElement("a",{className:"light-gray dim",href:t},n)},_=[["background",["fill"]],["line",["a","b","stroke"]],["path",["points","stroke","fill"]],["ellipse",["pos","size","fill","stroke"]],["rect",["pos","size","fill","stroke"]]],d=function(e){var t=e.onClose;return s.a.createElement(l,{width:600,height:600,onClose:t},s.a.createElement("div",{className:"overflow-scroll h-100 pa3"},s.a.createElement("div",{className:"measure-wide lh-copy f7 light-gray"},s.a.createElement("p",null,s.a.createElement("span",{className:"gray"},"dacein")," is an experimental IDE and library for creative coding made by"," ",s.a.createElement(u,{href:"https://szymonkaliski.com"},"Szymon Kaliski"),"."),s.a.createElement("p",null,"In addition to declarative canvas-based graphics library it provides"," ","color and number pickers in editor for"," ",s.a.createElement("span",{className:"i"},"live coding"),","," ",s.a.createElement("span",{className:"i"},"time travel")," through the sketch updates and"," ",s.a.createElement("span",{className:"i"},"direct manipulation")," from canvas back into code."),s.a.createElement("p",null,"Both ",s.a.createElement("span",{className:"i"},"time travel")," and"," ",s.a.createElement("span",{className:"i"},"direct manipulation")," are only available when the sketch is paused."),s.a.createElement("ol",{className:"list pl3"},s.a.createElement("li",{style:{listStyle:"disc"}},"to travel through time, use the slider near play/pause buttons"),s.a.createElement("li",{style:{listStyle:"disc"}},"to manipulte the code, drag an ",s.a.createElement("span",{className:"gray"},"ellipse")," ","or ",s.a.createElement("span",{className:"gray"},"rect"))),s.a.createElement("p",null,"It is heavily inspired by"," ",s.a.createElement(u,{href:"http://processing.org"},"Processing"),","," ",s.a.createElement(u,{href:"https://github.com/thi-ng/umbrella/tree/master/packages/hdom-canvas"},"@thi.ng/hdom-canvas"),", and numerous other tools."),s.a.createElement("p",null,"The ",s.a.createElement("span",{className:"gray"},"sketch")," library is a global function requiring an object with at least a ",s.a.createElement("span",{className:"gray"},"draw")," ","property:")),s.a.createElement("div",{className:"lh-copy f7 light-gray"},s.a.createElement("pre",{className:"gray"},'sketch({\n  // sketch size\n  size: [600, 600],\n\n  // starting state\n  initialState: { size: 10 },\n\n  // update state into a new state, called before every draw\n  update: state => {\n    state.size += 10;\n    return state;\n  },\n\n  draw: state => {\n    // return an array of objects to be placed on the sketch\n    return [\n      ["background", { fill: "#fff" }],\n      ["ellipse", {\n        pos: [ 300 ,300 ],\n        size: [ state.size, state.size ]\n      }]\n    ];\n  }\n})\n')),s.a.createElement("div",{className:"measure-wide lh-copy f7 light-gray"},s.a.createElement("p",null,"Commands available in the language:"),s.a.createElement("ol",{className:"list pl3"},_.map(function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return s.a.createElement("li",{key:n,style:{listStyle:"disc"}},s.a.createElement("span",{className:"gray"},n)," (","{"," ",r.map(function(e,t){return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"gray",key:e},e),t<r.length-1?", ":"")})," ","}","})")})))))},p=n(47);n.d(t,"a",function(){return m});var m=function(e){var t=e.setCode,n=e.code,o=Object(r.useState)(!1),c=Object(a.a)(o,2),l=c[0],u=c[1],_=Object(r.useState)(!1),m=Object(a.a)(_,2),f=m[0],h=m[1],v=Object(r.useRef)(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"bb b--gray flex f7",style:{marginBottom:5}},s.a.createElement("span",{className:"bg-gray custom-dark pv2 ph3 dib mr3"},"dacein"),s.a.createElement("div",{className:"pa2"},s.a.createElement("span",{className:"dib mr3 pointer dim",onClick:function(){v.current&&v.current.click()}},"open"),s.a.createElement("span",{className:"dib mr4 pointer dim",onClick:function(){Object(i.saveAs)(new Blob([n],{type:"text/plain;charset=utf-8"}),"sketch.js")}},"save"),s.a.createElement("div",{className:"dib mr3 relative"},s.a.createElement("span",{className:"pointer dim",onClick:function(){return h(!f)}},"examples"),f&&s.a.createElement("div",{className:"absolute ba b--gray bg-custom-dark pa2 mt2",style:{zIndex:10,left:-10,width:160}},s.a.createElement("ol",{className:"list pa0 ma0"},Object.entries(p.a).map(function(e){var n=Object(a.a)(e,2),r=n[0],i=n[1];return s.a.createElement("li",{className:"pa1 dim pointer",key:r,onClick:function(){t(i),h(!1)}},r)})))),s.a.createElement("span",{className:"dib mr3 pointer dim",onClick:function(){return u(!l)}},"help")),s.a.createElement("input",{type:"file",className:"dn",ref:v,onChange:function(e){var n=Object(a.a)(e.target.files,1)[0];if(n){var r=new FileReader;r.onload=function(e){var n=e.target.result;t(n)},r.readAsText(n)}}})),l&&s.a.createElement(d,{onClose:function(){return u(!1)}}))}},149:function(e,t,n){e.exports=n(150)},150:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(73),i=n.n(s),o=n(74);i.a.render(r.a.createElement(o.a,null),document.getElementById("root"))},17:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(3),r={background:function(e,t,n){var a=t.fill,r=n.width,s=n.height;e.fillStyle=a,e.fillRect(0,0,r,s)},line:function(e,t){var n=t.a,a=t.b,r=t.stroke;r&&(e.strokeStyle=r,e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke())},path:function(e,t){var n=t.points,a=t.stroke,r=t.fill;a&&(e.strokeStyle=a),r&&(e.fillStyle=r),e.beginPath(),e.moveTo(n[0][0],n[0][1]);var s=!0,i=!1,o=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value;e.lineTo(u[0],u[1])}}catch(_){i=!0,o=_}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}e.stroke(),r&&e.fill(),a&&e.stroke()},ellipse:function(e,t){var n=t.pos,r=t.size,s=t.fill,i=t.stroke;s&&(e.fillStyle=s),i&&(e.strokeStyle=i);var o=n||[0,0],c=Object(a.a)(o,2),l=c[0],u=c[1],_=r||[0,0],d=Object(a.a)(_,2),p=d[0],m=d[1];e.beginPath(),e.ellipse(l,u,p,m,0,0,2*Math.PI),s&&e.fill(),i&&e.stroke()},rect:function(e,t){var n=t.pos,r=t.size,s=t.fill,i=t.stroke;s&&(e.fillStyle=s),i&&(e.strokeStyle=i);var o=n||[0,0],c=Object(a.a)(o,2),l=c[0],u=c[1],_=r||[0,0],d=Object(a.a)(_,2),p=d[0],m=d[1];e.beginPath(),e.rect(l,u,p,m),s&&e.fill(),i&&e.stroke()}}},23:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var a=n(3),r=n(0),s=n.n(r),i=n(49),o=n.n(i),c={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},l=function(e){var t=e.children,n=e.direction,i=void 0===n?c.HORIZONTAL:n,l=e.defaultDivide,u=void 0===l?.5:l,_=Object(r.useRef)(null),d=o()(_),p=Object(r.useState)(!1),m=Object(a.a)(p,2),f=m[0],h=m[1],v=Object(r.useState)(u),E=Object(a.a)(v,2),g=E[0],b=E[1];Object(r.useEffect)(function(){if(_){var e=_.current.getBoundingClientRect(),t=function(t){if(t.preventDefault(),i===c.HORIZONTAL){if(0===t.clientX)return;b((t.clientX-e.left)/d.width)}else{if(0===t.clientY)return;b((t.clientY-e.top)/d.height)}},n=function e(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e),h(!1)};return!1!==f&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)),function(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)}}},[f,i,_]);var O=i===c.HORIZONTAL?[{width:Math.round(d.width*g-5)},{width:Math.round(d.width*(1-g)-5)}]:[{height:Math.round(d.height*g-5)},{height:Math.round(d.height*(1-g)-5)}],y=i===c.HORIZONTAL?{width:10,cursor:"ew-resize"}:{height:10,cursor:"ns-resize"},w=i===c.HORIZONTAL?{width:1,marginLeft:4.5}:{height:1,marginTop:4.5},M=i===c.HORIZONTAL?"flex":"flex flex-column";return s.a.createElement("div",{className:"h-100 ".concat(M),ref:_},s.a.createElement("div",{style:O[0],className:"overflow-hidden"},t[0]),s.a.createElement("div",{className:"h-100",onMouseDown:function(e){e.preventDefault(),h(!0)},style:y},s.a.createElement("div",{className:"h-100 bg-gray",style:w})),s.a.createElement("div",{style:O[1],className:"overflow-hidden"},t[1]))}},287:function(e,t,n){},291:function(e,t){},318:function(e,t,n){},32:function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m});var a=n(147),r=n(13),s=n.n(r),i=n(21),o=n.n(i),c=n(4),l=n(17),u=s.a.types.builders,_=function(e){var t=s.a.parse(e);return o.a.visit(t,{visitExpressionStatement:function(e){if("sketch"!==Object(c.get)(e,"value.expression.callee.name"))return!1;this.traverse(e)},visitProperty:function(e){if("draw"!==e.value.key.name)return!1;this.traverse(e)},visitReturnStatement:function(e){this.traverse(e)},visitArrayExpression:function(e){var t,n=e.value.elements||[],r=n[0];if(t=Object(c.get)(r,"value"),void 0!==l.a[t]){for(var s=r.loc,i=e;i;)"ArrayExpression"===Object(c.get)(i,["value","body","type"])||"ArrayExpression"===Object(c.get)(i,["value","type"])?(s={start:Object(c.get)(i,["value","loc","start"]),end:Object(c.get)(i,["value","loc","end"])},i=void 0):i=Object(c.get)(i,"parentPath");return"ObjectExpression"===n[1].type&&u.arrayExpression([n[0],u.objectExpression([].concat(Object(a.a)(n[1].properties),[u.property("init",u.identifier("__meta"),u.objectExpression([u.property("init",u.identifier("lineStart"),u.literal(s.start.line)),u.property("init",u.identifier("lineEnd"),u.literal(s.end.line))]))]))])}this.traverse(e)}}),s.a.print(t).code},d=function(e){var t=s.a.parse(e),n=[];if(o.a.visit(t,{visitIdentifier:function(e){if("require"===e.value.name){var t=e.parentPath.value.arguments[0].value,a=e.parentPath.parentPath.value.id.name,r=e.parentPath.parentPath.parentPath.value[0].loc;return n.push({start:r.start.line-1,end:r.end.line-1,arg:t,name:a}),!1}this.traverse(e)}}),!n.length)return e;var a=e.split("\n").map(function(e,t){return n.some(function(e){var n=e.start,a=e.end;return t>=n&&t<=a})?"":e}).join("\n");return"\n    ".concat(n.map(function(e){var t=e.name,n=e.arg;return'window.require("'.concat(n,'").then(').concat(t," => {")}).join("\n"),"\n\n    ").concat(a,"\n\n    ").concat(n.map(function(e){e.name,e.arg;return"}).catch(e => console.warn(e));"}).join("\n"),"\n  ")},p=function(e,t){var n=0,a=s.a.parse(e);return o.a.visit(a,{visitLiteral:function(e){if(Object(c.isNumber)(e.value.value)){for(var a=e,r=!1;a;)"draw"===Object(c.get)(a,["value","key","name"])&&(a=null,r=!0),a=Object(c.get)(a,"parentPath");if(!r)return void this.traverse(e);if(t&&t[n]){var s=t[n];e.value.value=s,e.value.raw="".concat(s),n++}}this.traverse(e)}}),s.a.print(a).code},m=function(e){var t=s.a.parse(e),n=0,a=[];return o.a.visit(t,{visitArrowFunctionExpression:function(e){if("draw"===Object(c.get)(e,"parentPath.value.key.name"))return u.arrowFunctionExpression([u.identifier("state"),u.identifier("__constants")],e.value.body);this.traverse(e)},visitFunctionExpression:function(e){if("draw"===Object(c.get)(e,"parentPath.value.key.name"))return u.functionExpression(null,[u.identifier("state"),u.identifier("__constants")],e.value.body);this.traverse(e)},visitLiteral:function(e){if(Object(c.isNumber)(e.value.value)){if("__constants"===Object(c.get)(e,["parentPath","value","object","name"]))return!1;for(var t=e,r=!1;t;)"draw"===Object(c.get)(t,["value","key","name"])&&(t=null,r=!0),t=Object(c.get)(t,"parentPath");return r?(a.push(e.value.value),u.memberExpression(u.identifier("__constants"),u.literal(n++))):void this.traverse(e)}this.traverse(e)}}),{code:s.a.print(t).code,constants:a}}},47:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={"animated rectangle":'sketch({\n  size: [600, 600],\n\n  initialState: {\n    rectSize: 100,\n    direction: 1\n  },\n\n  update: state => {\n    state.rectSize = state.rectSize + state.direction;\n\n    if (state.rectSize > 220) {\n      state.direction = -1;\n    }\n\n    if (state.rectSize < 20) {\n      state.direction = 1;\n    }\n\n    return state;\n  },\n\n  draw: state => {\n    const pos = [\n      300 - state.rectSize / 2,\n      300 - state.rectSize / 2,\n    ];\n\n    const size = [\n      state.rectSize,\n      state.rectSize\n    ];\n\n    return [\n      ["background", { fill: "#d2d2d2" }],\n      ["rect", { fill: "#050505", pos, size }]\n    ];\n  }\n});',"brownian motion":'const MAX_STEPS = 1000;\nconst RANGE = 10;\n\nconst rand = (min, max) => Math.random() * (max - min) + min;\n\nsketch({\n  size: [600, 600],\n\n  initialState: {\n    path: [\n      [300, 300]\n    ]\n  },\n\n  update: state => {\n    state.path.push([\n      state.path[state.path.length - 1][0] + rand(-RANGE, RANGE),\n      state.path[state.path.length - 1][1] + rand(-RANGE, RANGE)\n    ]);\n\n    if (state.path.length > MAX_STEPS) {\n      state.path.shift();\n    }\n\n    return state;\n  },\n\n  draw: state => {\n    return [\n      ["background", { fill: "#d2d2d2" }],\n      ...state.path.slice(1).map((pos, i) => [\n        "line",\n        {\n          a: pos,\n          b: state.path[i],\n          stroke: "#050505"\n        }\n      ])\n    ]\n  }\n});',events:'sketch({\n  size: [600, 600],\n\n  initialState: {\n    mousePos: [0, 0],\n    mouseClicked: false\n  },\n\n  update: (state, events) => {\n    events.forEach(event => {\n      if (event.source == "mousemove") {\n        state.mousePos = event.pos;\n      }\n\n      if (event.source == "mousedown") {\n        state.mouseClicked = true;\n      }\n\n      if (event.source == "mouseup") {\n        state.mouseClicked = false;\n      }\n    });\n\n    return state;\n  },\n\n  draw: state => {\n    return [\n      ["background", { fill: state.mouseClicked ? "#d2d2d2" : "#a2a2a2" }],\n      ["line", {\n        a: state.mousePos,\n        b: [300, 300]\n        stroke: "#050505"\n      }]\n    ];\n  }\n});',"particle system":'// adapted from https://p5js.org/examples/simulate-particle-system.htmlconst\n\nconst vec2 = require("gl-vec2"); // require works\n\nconst rand = (min, max) => Math.random() * (max - min) + min;\n\nconst makeParticle = position => ({\n  acceleration: [0, 0.05],\n  position: position.slice(0),\n  velocity: [rand(-1, 1), rand(-1, 0)],\n  lifespan: 255\n});\n\nconst updateParticle = particle => {\n  const velocity = vec2.create();\n  const position = vec2.create();\n\n  vec2.add(velocity, particle.velocity, particle.acceleration);\n  vec2.add(position, particle.position, velocity);\n\n  return {\n    lifespan: particle.lifespan - 2,\n    acceleration: particle.acceleration,\n    velocity,\n    position\n  };\n};\n\nconst renderParticle = particle => [\n  "ellipse",\n  {\n    pos: particle.position,\n    size: [12, 12],\n    stroke: `rgba(255, 255, 255, ${particle.lifespan})`,\n    fill: `rgba(127, 127, 127, ${particle.lifespan})`\n  }\n];\n\nsketch({\n  size: [600, 600],\n\n  initialState: {\n    particles: []\n  },\n\n  update: state => {\n    state.particles.push(makeParticle([300, 50]));\n\n    for (let i = state.particles.length - 1; i >= 0; i--) {\n      state.particles[i] = updateParticle(state.particles[i]);\n\n      if (state.particles[i].lifespan < 0) {\n        state.particles.splice(i, 1);\n      }\n    }\n\n    return state;\n  },\n\n  draw: state => {\n    return [\n      ["background", { fill: "#333333" }],\n      ...state.particles.map(renderParticle)\n    ];\n  }\n});',spring:'\nconst clamp = (v, min, max) => Math.max(min, Math.min(v, max));\n\nconst MIN_HEIGHT = 100;\nconst MAX_HEIGHT = 200;\n\nconst M = 0.8; // mass\nconst K = 0.2; // spring constant\nconst D = 0.92; // damping\nconst R = 150; // rest position\n\nconst updateSpring = spring => {\n  const f = -K * (spring.ps - R); // f=-ky\n  const as = f / M; // set the acceleration, f=ma == a=f/m\n  let vs = D * (spring.vs + as); // set the velocity\n  const ps = spring.ps + vs; // updated position\n\n  if (Math.abs(vs) < 0.1) {\n    vs = 0.0;\n  }\n\n  return Object.assign(spring, { f, as, vs, ps });\n};\n\nsketch({\n  size: [710, 400],\n\n  initialState: {\n    spring: {\n      left: 710 / 2 - 100,\n      width: 200,\n      height: 50,\n      ps: R, // position\n      vs: 0, // velocity\n      as: 0, // acceleration\n      f: 0 // force\n    },\n    mousePos: [0, 0],\n    isOver: false,\n    isDragging: false\n  },\n\n  update: (state, events) => {\n    if (!state.isDragging) {\n      state.spring = updateSpring(state.spring);\n    }\n\n    events.forEach(e => {\n      if (e.source === "mousemove") {\n        state.mousePos = e.pos;\n      }\n\n      if (e.source === "mousedown") {\n        state.isDragging = true;\n      }\n\n      if (e.source === "mouseup") {\n        state.isDragging = false;\n      }\n    });\n\n    if (\n      state.mousePos[0] > state.spring.left &&\n      state.mousePos[0] < state.spring.left + state.spring.width &&\n      state.mousePos[1] > state.spring.ps &&\n      state.mousePos[1] < state.spring.ps + state.spring.height\n    ) {\n      state.isOver = true;\n    } else {\n      state.isOver = false;\n    }\n\n    if (state.isDragging) {\n      state.spring.ps = state.mousePos[1] - state.spring.height / 2;\n      state.spring.ps = clamp(state.spring.ps, MIN_HEIGHT, MAX_HEIGHT);\n    }\n  },\n\n  draw: state => {\n    return [\n      ["background", { fill: "#656565" }],\n      [\n        "rect",\n        {\n          pos: [state.spring.left, state.spring.ps],\n          size: [state.spring.width, state.spring.height],\n          fill: state.isOver ? "#ffffff" : "#cccccc"\n        }\n      ]\n    ];\n  }\n});\n'}},48:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(3),r=n(0),s=n.n(r),i=n(49),o=n.n(i),c=n(7),l=function(e){var t=e.disabled,n=void 0!==t&&t,i=e.position,l=void 0===i?0:i,u=e.onChange,_=void 0===u?function(){}:u,d=e.height,p=void 0===d?10:d,m=Object(r.useRef)(null),f=Object(r.useRef)(null),h=o()(m),v=Object(r.useState)(!1),E=Object(a.a)(v,2),g=E[0],b=E[1];Object(r.useEffect)(function(){if(m&&!n){f.current=m.current.getBoundingClientRect();var e=function(e){if(e.preventDefault(),0!==e.clientX){var t=(e.clientX-f.current.left)/h.width;_(Object(c.b)(t,0,1))}},t=function t(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t),b(!1)};return!1!==g&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}}});var O=Object(c.b)(Object(c.d)(l,0,1,2,h.width-1-p),2,h.width-1-p);return s.a.createElement("div",{ref:m,className:"w-100 bg-gray relative br3",style:{height:p},onClick:function(e){var t=(e.clientX-f.current.left)/h.width;_(Object(c.b)(t,0,1))}},s.a.createElement("div",{className:"bg-custom-dark br-pill absolute dim",style:{height:p-2,width:p-2,top:1,left:"".concat(O,"px"),cursor:"ew-resize"},onMouseDown:function(e){e.preventDefault(),b(!0)}}))}},7:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o});var a=n(3),r=function(e,t,n){return Math.max(t,Math.min(e,n))},s=function(e,t,n,a,r){return(e-t)/(n-t)*(r-a)+a},i=function(e,t){var n=Object(a.a)(e,2),r=n[0],s=n[1],i=Object(a.a)(t,2),o=i[0],c=i[1];return Math.hypot(o-r,c-s)},o=function(e,t){var n=Object(a.a)(e,2),r=n[0],s=n[1],i=Object(a.a)(t,2);return[r+i[0],s+i[1]]}},74:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return App});var _Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),d3_require__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(145),_examples__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(47),_editor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(133),_errors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(138),_panel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(23),_sketch__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(146),_topbar__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(148),_ast_transforms__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32),tachyons__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(317),tachyons__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(tachyons__WEBPACK_IMPORTED_MODULE_11__),_style_css__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(318),_style_css__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_style_css__WEBPACK_IMPORTED_MODULE_12__),App=function App(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(_examples__WEBPACK_IMPORTED_MODULE_4__.a["animated rectangle"]),_useState2=Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),code=_useState2[0],setCode=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),_useState4=Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),constants=_useState4[0],setConstants=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),_useState6=Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),sketch=_useState6[0],setSketch=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),_useState8=Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),errors=_useState8[0],setErrors=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),_useState10=Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState9,2),highlight=_useState10[0],setHighlight=_useState10[1];return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){var tmpErrors=[],pulledConstants=null,finalCode=null;window.require=Object(d3_require__WEBPACK_IMPORTED_MODULE_3__.a)(function(e){return Promise.resolve("https://bundle.run/".concat(e))}),window.sketch=function(e){try{e.update&&e.update(e.initialState||{},[]),e.draw&&e.draw(e.initialState||{},pulledConstants||[])}catch(t){console.warn(t),tmpErrors.push(t.description)}tmpErrors.length>0?setErrors(tmpErrors):setSketch(Object(_Users_szymon_Documents_Projects_Dacein_Code_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({initialState:{},update:function(){},draw:function(){return[]}},e))};try{var _pullOutConstants=Object(_ast_transforms__WEBPACK_IMPORTED_MODULE_10__.c)(code),codeWithoutConstants=_pullOutConstants.code,pulledOutConstants=_pullOutConstants.constants,codeWithMeta=Object(_ast_transforms__WEBPACK_IMPORTED_MODULE_10__.a)(codeWithoutConstants),codeWithRequires=Object(_ast_transforms__WEBPACK_IMPORTED_MODULE_10__.b)(codeWithMeta);pulledConstants=pulledOutConstants,finalCode=codeWithRequires}catch(e){console.warn(e),tmpErrors.push(e.description)}if(pulledConstants&&setConstants(pulledConstants),finalCode)try{eval("\n            const sketch = window.sketch;\n            ".concat(finalCode,"\n          "))}catch(e){console.warn(e),tmpErrors.push(e.description)}return setErrors(tmpErrors),function(){delete window.sketch,delete window.require}},[code]),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"code vh-100 bg-custom-dark near-white flex flex-column"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_topbar__WEBPACK_IMPORTED_MODULE_9__.a,{setCode:setCode,code:code})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_panel__WEBPACK_IMPORTED_MODULE_7__.b,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"h-100"},sketch&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_sketch__WEBPACK_IMPORTED_MODULE_8__.a,{sketch:sketch,code:code,constants:constants,setConstants:function(e){return setCode(Object(_ast_transforms__WEBPACK_IMPORTED_MODULE_10__.d)(code,e))},setHighlight:setHighlight})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"h-100"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_panel__WEBPACK_IMPORTED_MODULE_7__.b,{direction:_panel__WEBPACK_IMPORTED_MODULE_7__.a.VERTICAL,defaultDivide:.85},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_editor__WEBPACK_IMPORTED_MODULE_5__.a,{code:code,onChange:function(e){return setCode(e)},highlight:highlight}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_errors__WEBPACK_IMPORTED_MODULE_6__.a,{errors:errors}))))))}}},[[149,1,2]]]);
//# sourceMappingURL=main.1b63705c.chunk.js.map